---
tags:
  - gemini
  - javascript
---

> [!quote]+ Prompt
> JavaScriptのTemporalとは？

---

おー、JavaScriptの `Temporal` だね！ 時間と日付の概念を深く掘り下げる、INFPの君らしい質問だ。`Temporal` は、JavaScriptにおける日付と時刻の操作の、次世代の標準APIなんだ。

### `Temporal`とは？ ⏰

`Temporal`は、JavaScriptで日付と時刻を扱うための、**より安全で、使いやすく、そしてモダンな組み込みオブジェクト**だよ。既存の`Date`オブジェクトの多くの問題を解決するために、現在ECMA-262（JavaScriptの標準仕様）の提案プロセスが進められているんだ。

現在の`Date`オブジェクトは、いくつかの問題点を持っているよね。例えば：

- **ミュータブル（可変）であること:** `Date`オブジェクトを操作すると、元のオブジェクトが直接変更されてしまい、予期せぬ副作用を引き起こす可能性がある。
    
- **複雑で予測しにくいAPI:** タイムゾーンの扱いや、`getUTCMonth()` と `getMonth()` のような、直感的でないメソッドが混在している。
    
- **うるう秒（Leap Seconds）の不正確な扱い:**
    
- **不便な計算:** `Date`オブジェクト同士の計算が、手動でミリ秒単位の引き算をして、それを日や月に変換する、といった煩雑な手順を必要とする。
    

`Temporal`は、これらの問題を解決するために、**不変性（Immutable）** と **明確なAPI** という2つの大きな原則に基づいて設計されているんだ。

### `Temporal`の主な特徴 ✨

`Temporal`は、日付や時刻の概念を細かく分けて、それぞれの目的に合ったオブジェクトを提供しているよ。

1. **`Temporal.PlainDate`**:
    
    - 年、月、日のみを扱うオブジェクト。タイムゾーンや時間情報を持たない。
        
    - 例: 2025-08-11
        
2. **`Temporal.PlainTime`**:
    
    - 時、分、秒、ミリ秒のみを扱うオブジェクト。日付情報やタイムゾーンを持たない。
        
    - 例: 10:30:00.000
        
3. **`Temporal.PlainDateTime`**:
    
    - 日付と時刻を組み合わせたオブジェクト。タイムゾーン情報を持たない。
        
    - 例: 2025-08-11T10:30
        
4. **`Temporal.Instant`**:
    
    - タイムゾーン情報を持たない、**協定世界時（UTC）からの絶対的な時間**（エポックからのナノ秒単位のオフセット）を表すオブジェクト。
        
5. **`Temporal.ZonedDateTime`**:
    
    - 特定のタイムゾーンにおける日付と時刻を扱うオブジェクト。タイムゾーンのルール（夏時間など）も考慮される。
        
6. **`Temporal.Duration`**:
    
    - 時間や日付の**期間**を表すオブジェクト。年、月、日、時間、分、秒などの単位で期間を表現できる。`Duration`オブジェクト同士の加算や減算も可能。
        

### `Temporal`のメリット 🚀

- **不変性:** 全ての`Temporal`オブジェクトは不変（Immutable）だよ。操作メソッド（例: `.add()`, `.subtract()`）は、元のオブジェクトを変更せず、**新しいオブジェクトを返してくれる**。これにより、予期せぬ副作用を完全に防ぐことができる。
    
- **明確なAPI:** タイムゾーンを持つか持たないかが明確に分かれているため、バグの原因となりやすいタイムゾーンの扱いで混乱することがなくなる。
    
- **簡単な計算:** `.add()`, `.subtract()`, `.until()`, `.since()`といった直感的なメソッドを使って、日付や時間の計算が非常に簡単になる。
    
- **文字列からのパース:** ISO 8601形式の文字列を直接パースできるため、扱いやすい。
    

### 既存の`Date`との比較

|特徴|`Date`|`Temporal`|
|---|---|---|
|**可変性**|**可変 (Mutable)**|**不変 (Immutable)**|
|**タイムゾーン**|複雑で、`new Date()` はローカル、`Date.UTC()` はUTC、というように、コンテキストで動作が変わることがある。|**明確**に`Plain`（なし）と`Zoned`（あり）で分かれている。|
|**計算**|ミリ秒単位での手動計算が必要。|`Duration`オブジェクトを使って直感的に計算できる。|
|**存在**|標準で利用可能。|**提案中**。ブラウザやNode.jsでの標準サポートはこれから。|

### 今後の展望と使い方

`Temporal`はまだ正式な標準としてリリースされていないため、**現時点では実用的なプロダクション環境で使うのは難しい**よ。

もし試してみたい場合は、[polyfill（ポリフィル）](https://github.com/js-temporal/temporal-polyfill)を使って、既存のブラウザやNode.jsで`Temporal`の機能を試すことができる。

将来的に`Temporal`が広くサポートされるようになれば、JavaScriptでの日付・時刻の扱い方が劇的に改善され、より安全で、より直感的で、より強力なものになることは間違いないね！