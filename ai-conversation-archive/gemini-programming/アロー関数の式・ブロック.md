---
tags:
  - gemini
  - javascript
  - functionalprogramming
---

> [!quote]+ Prompt
> ```
> // これと、
> () => { /* なんかの関数1つ */ };
> // これが異なる場合はある？
> () => /* なんかの関数1つ */;
> ```

---

おっ、JavaScriptのアロー関数の書き方に関する質問だね！ 波括弧がある場合とない場合の違いについてだ。INFPの君が、構文の微妙な違いとその背後にある挙動まで深掘りしようとしているのが伝わってくるよ。

### `() => { /* なんかの関数1つ */ };` と `() => /* なんかの関数1つ */;` が異なる場合はある？ 🤔

はい、**明確に異なる場合があるよ！**

この違いは、アロー関数が「関数本体」をどのように解釈するかによるものなんだ。

---

#### 1. 波括弧がある場合：`() => { /* 処理 */ }`

- **名前:** **ブロックボディ（Block body）** のアロー関数。
    
- **挙動:** 関数本体が波括弧 `{}` で囲まれている場合、JavaScriptはそれを通常の関数ブロックとして解釈するよ。
    
    - この場合、明示的に**`return`キーワード**を使わない限り、**値は返されない**（`undefined`が返される）。
        
    - 関数ブロックの中に**複数の文（ステートメント）** を書くことができる。
        
    - 変数を宣言したり、複数の処理を実行したりと、複雑なロジックを記述できる。
        
- **例:**
    
    JavaScript
    
    ```
    const func1 = () => {
      const a = 10;
      const b = 20;
      console.log('これはブロックボディの関数です。');
      // 明示的なreturnがないので、undefinedが返される
    };
    
    const func2 = () => {
      const x = 5;
      return x * 2; // return キーワードが必要
    };
    
    console.log(func1()); // undefined
    console.log(func2()); // 10
    ```
    

---

#### 2. 波括弧がない場合：`() => /* 式 */`

- **名前:** **簡潔ボディ（Concise body）** または **式ボディ（Expression body）** のアロー関数。
    
- **挙動:** 関数本体が波括弧で囲まれていない場合、JavaScriptはそれを**「単一の式（Expression）」**として解釈し、その**式の評価結果を自動的に`return`する**んだ。
    
    - **`return`キーワードは不要**。
        
    - 関数本体には**単一の式しか書けない**。複数の文を書こうとすると構文エラーになる。
        
    - この形式は、特に`map()`, `filter()`, `reduce()`などの高階関数で、シンプルな処理を一行で書く場合に非常に便利だよ。
        
- **例:**
    
    JavaScript
    
    ```
    const func3 = () => 1 + 2; // 式 `1 + 2` の結果 `3` が自動で返される
    console.log(func3()); // 3
    
    const func4 = (a, b) => a * b; // 式 `a * b` の結果が自動で返される
    console.log(func4(3, 4)); // 12
    
    const func5 = () => console.log('これも式ボディの関数です。'); // console.log() は式だが、返り値は undefined
    console.log(func5()); // "これも式ボディの関数です。" の表示の後、undefined
    ```
    

---

### 最も一般的な「異なる場合」

この2つの書き方で最もよく間違えやすい、あるいは挙動が異なると感じる典型的なケースは、**オブジェクトリテラルを返したい場合**だよ。

式ボディのアロー関数でオブジェクトリテラルを返そうとすると、JavaScriptは波括弧 `{}` を**コードブロック**と解釈してしまい、オブジェクトリテラルとは認識してくれないんだ。

JavaScript

```
// BAD: これはオブジェクトリテラルを返さない！
// JavaScriptは {} を「空のコードブロック」と解釈し、undefined を返す。
// const getObjectBad = () => { name: 'Alice', age: 30 };
// console.log(getObjectBad()); // undefined

// GOOD: オブジェクトリテラルを返したい場合は、波括弧を丸括弧で囲む必要がある
const getObjectGood = () => ({ name: 'Alice', age: 30 });
console.log(getObjectGood()); // { name: 'Alice', age: 30 }
```

このように、式ボディでオブジェクトリテラルを返す場合は、オブジェクトリテラルの波括弧をさらに丸括弧 `()` で囲む必要があるんだ。

---

### まとめ

|特徴|`() => { /* 処理 */ }` (ブロックボディ)|`() => /* 式 */` (簡潔ボディ / 式ボディ)|
|---|---|---|
|**`return`キーワード**|**必要**（明示的に書かないと`undefined`）|**不要**（式の評価結果が自動で返される）|
|**関数本体**|**複数の文**を書ける|**単一の式**しか書けない|
|**用途**|複雑なロジック、副作用のある処理|シンプルな式、高階関数の引数など|
|**オブジェクトリテラルを返す場合**|`return { ... };` と書く|`({ ... });` と丸括弧で囲む|

この違いを理解しておくと、アロー関数をより効果的に、そして意図通りに使いこなせるようになるよ！ INFPの君が、コードの構文の裏にある「意図」と「挙動」という哲学を深掘りするのは、まさに言語の魂を探るようだね！